@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model CI_Platform.Entities.ViewModel.Admintables

<div class="row">

    <div class="d-flex justify-content-between">
        <h3>User Data</h3>
    </div>

    <hr>

    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">FirstName</label>
            <input asp-for="@Model.FirstName" value="@Model.FirstName" type="text" class="form-control fname" oninput="HideErrorMessage('fnamespan')"/>
            <input asp-for="@Model.UserId" hidden value="@Model.UserId" type="text" class="form-control UserId"  />
            <span class="text-danger hide" id="fnamespan" style="display:none;">First Name is required</span>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">LastName</label>
            <input asp-for="@Model.LastName" value="@Model.LastName" type="text" class="form-control lname" oninput="HideErrorMessage('lnamespan')">
            <span class="text-danger hide" id="lnamespan" style="display:none;">Last Name is required</span>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">Email</label>
            <input asp-for="@Model.Email" value="@Model.Email" type="email" class="form-control mail" oninput="HideErrorMessage('emailspan')" />
            <span class="text-danger hide" id="emailspan" style="display:none;">Email is required</span>

        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">PhoneNumber</label>
            <input asp-for="@Model.PhoneNumber" value="@Model.PhoneNumber" type="number" min="0" class="form-control phonenumber" oninput="HideErrorMessage('phonenumberspan')">
            <span class="text-danger hide" id="phonenumberspan" style="display:none;">Phone Number is required</span>
        </div>
    </div>
</div>
<div class="row">

    <div class="col-12 col-lg-4">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">EmployeeId</label>
            <input asp-for="@Model.EmployeeId" value="@Model.EmployeeId" type="text" class="form-control emid" oninput="HideErrorMessage('employeeidspan')" />
            <span class="text-danger hide" id="employeeidspan" style="display:none;">Employee Id is required</span>
        </div>
    </div>
    <div class="col-12 col-lg-4">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">DepartmentName</label>
            <input asp-for="@Model.Department" value="@Model.Department" type="text" class="form-control dname" oninput="HideErrorMessage('dnamespan')">
            <span class="text-danger hide" id="dnamespan" style="display:none;">Department Name is required</span>
        </div>
    </div>
    <div class="col-12 col-lg-4">
        <div class="mb-3">
            <label for="recipient-name" class="col-form-label">Status</label>
            <input asp-for="@Model.Status" value="@Model.Status" type="text" class="form-control userstatus" oninput="HideErrorMessage('statusspan')">
            <span class="text-danger hide" id="statusspan" style="display:none;">Status is required</span>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="CountryList">Country</label>
            <select id="CountrySelect" asp-for="@Model.CountryId" class="form-select mt-1 mb-3 CountrySelect" name="CountryList" aria-label="Default select example">
                @{
                    var selectedCountry = @Model.CountriesList.FirstOrDefault();
                }


                <option value="@selectedCountry.CountryId" selected>@selectedCountry.Name</option>

                @foreach (var countries in Model.CountriesList.Where(m => m.CountryId != (selectedCountry.CountryId)))
                {
                    <option value="@countries.CountryId">@countries.Name</option>

                }
            </select>

            <div id="CountrySelect_validation" style="display:none;">
                <span style="color:red; padding-left:6px">
                    First Name Required!
                </span>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="mb-3">
            <label for="CityList">City</label>
            <select asp-for="@Model.CityID" id="CityList" class="form-select mt-1 mb-3 CityList " name="CityList" aria-label="Default select example">


                <option value="-1" selected>Select City</option>

                @foreach (var cities in Model.CityList.Where(m => m.CountryId == @Model.CountryId))
                {
                    <option class="CitySelect" value="@cities.CityId">@cities.Name</option>

                }
            </select>
            <div id="CityList_validation" style="display:none;">
                <span style="color:red; padding-left:6px">
                    First Name Required!
                </span>
            </div>
        </div>
    </div>

</div>

<div class="text-end mt-4 mb-3">
    <button type="button" class="btn btn-secondary text-center rounded-pill" onclick="ReturnUserPage()">Close</button>
    <button type="button" class="btn orage_color text-center rounded-pill " onclick="AddUserData()" style="border: 2px solid #F88634;color: #F88634;">Submit</button>
</div>


<script>
    $('.CountrySelect').on('change', function () {
    var countryId = $('.CountrySelect').find(":selected").val();
    $.ajax({
        url: '/Mission/GetCityByCountry',
        type: 'GET',
        data: { CountryId: countryId },
        dataType: 'json',
        success: function (data) {
            var cities = $('.CityList');
            cities.empty();
            var items = "";
            $(data).each(function (i, item) {
                items += `<option value=` + item.cityId + `>` + item.name + `</option>`
            });
            cities.html(items);
        }
    });
});
</script>